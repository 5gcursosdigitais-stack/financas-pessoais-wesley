<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#0f172a">
    <title>Wesley Finance AI | Ultimate v4.0</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        /* === SYSTEM DESIGN V4.0 === */
        :root {
            --bg-app: #0f172a;
            --bg-surface: #1e293b;
            --bg-elevated: #334155;
            --text-primary: #f8fafc;
            --text-secondary: #94a3b8;
            
            --brand-primary: #6366f1;
            --brand-glow: rgba(99, 102, 241, 0.4);
            
            --color-success: #10b981;
            --color-danger: #ef4444;
            --color-warning: #f59e0b;
            --color-info: #0ea5e9;
            
            --border: 1px solid rgba(255,255,255,0.08);
            --radius: 16px;
            
            --safe-top: env(safe-area-inset-top);
            --safe-bottom: env(safe-area-inset-bottom);
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; margin: 0; padding: 0; }
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-app);
            color: var(--text-primary);
            height: 100dvh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        /* Scroll Customizado */
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-thumb { background: var(--bg-elevated); border-radius: 4px; }

        /* Container Principal */
        .app-shell {
            flex: 1;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            padding: 20px;
            padding-top: calc(var(--safe-top) + 20px);
            padding-bottom: 140px;
            max-width: 600px;
            margin: 0 auto;
            width: 100%;
        }

        /* Header */
        .header {
            display: flex; justify-content: space-between; align-items: center;
            margin-bottom: 24px; padding: 0 4px;
        }
        .brand { display: flex; align-items: center; gap: 12px; }
        .brand-icon { 
            width: 44px; height: 44px; 
            background: linear-gradient(135deg, var(--brand-primary), #8b5cf6);
            border-radius: 12px; display: flex; align-items: center; justify-content: center;
            font-size: 1.5rem; box-shadow: 0 0 20px var(--brand-glow);
        }
        .brand-text h1 { font-size: 1.1rem; font-weight: 800; line-height: 1.1; }
        .brand-text span { font-size: 0.7rem; color: var(--text-secondary); font-weight: 500; text-transform: uppercase; letter-spacing: 1px; }

        /* Cards */
        .card {
            background: var(--bg-surface);
            border: var(--border);
            border-radius: var(--radius);
            padding: 20px;
            margin-bottom: 16px;
            position: relative;
            overflow: hidden;
        }

        /* Saldo Card (Destaque) */
        .balance-card {
            background: linear-gradient(160deg, rgba(30,41,59,0.9), rgba(15,23,42,0.95));
            border: 1px solid rgba(99,102,241,0.3);
        }
        .balance-card::before {
            content: ''; position: absolute; top: 0; left: 0; right: 0; height: 3px;
            background: linear-gradient(90deg, var(--brand-primary), #ec4899);
        }

        .label { font-size: 0.75rem; color: var(--text-secondary); text-transform: uppercase; font-weight: 600; letter-spacing: 0.5px; }
        .amount-lg { font-size: 2.5rem; font-weight: 800; margin: 8px 0 16px; letter-spacing: -1px; }
        
        .stats-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
        .stat-box { background: rgba(255,255,255,0.03); padding: 12px; border-radius: 12px; }
        .amount-sm { font-size: 1.1rem; font-weight: 700; display: block; margin-top: 4px; }
        .text-green { color: var(--color-success); }
        .text-red { color: var(--color-danger); }

        /* AI Insight Box */
        .ai-box {
            background: rgba(99, 102, 241, 0.1);
            border-left: 3px solid var(--brand-primary);
            padding: 16px; border-radius: 8px;
            margin-bottom: 24px; display: flex; gap: 12px; align-items: start;
        }
        .ai-icon { font-size: 1.2rem; }
        .ai-text strong { color: #a5b4fc; display: block; margin-bottom: 4px; font-size: 0.9rem; }
        .ai-text p { font-size: 0.8rem; color: var(--text-secondary); line-height: 1.4; }

        /* Lista de Transa√ß√µes */
        .tx-list { display: flex; flex-direction: column; gap: 10px; }
        .tx-item {
            display: flex; justify-content: space-between; align-items: center;
            background: var(--bg-surface); padding: 16px;
            border-radius: 16px; border: var(--border);
            transition: transform 0.1s;
        }
        .tx-item:active { transform: scale(0.98); background: var(--bg-elevated); }
        
        .tx-left { display: flex; align-items: center; gap: 14px; }
        .tx-icon { 
            width: 42px; height: 42px; background: rgba(255,255,255,0.05); 
            border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; 
        }
        .tx-info h3 { font-size: 0.95rem; font-weight: 600; margin-bottom: 2px; color: var(--text-primary); }
        .tx-info p { font-size: 0.75rem; color: var(--text-secondary); }
        .tx-val { font-weight: 700; font-size: 1rem; }

        /* Formul√°rios e Inputs */
        .input-group { margin-bottom: 20px; }
        .input-field {
            width: 100%; height: 56px; background: var(--bg-surface);
            border: 1px solid rgba(255,255,255,0.1); border-radius: 16px;
            padding: 0 16px; color: white; font-size: 1rem; font-family: 'Inter';
            transition: border-color 0.3s;
        }
        .input-field:focus { border-color: var(--brand-primary); }

        .type-tabs { display: flex; background: var(--bg-surface); padding: 4px; border-radius: 16px; margin-bottom: 24px; border: var(--border); }
        .tab { flex: 1; padding: 12px; text-align: center; font-weight: 600; color: var(--text-secondary); border-radius: 12px; cursor: pointer; transition: 0.2s; }
        
        /* CORES CORRIGIDAS PARA BOT√ïES ATIVOS */
        .tab.active.rec { background: var(--color-success); color: white; box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3); }
        .tab.active.desp { background: var(--color-danger); color: white; box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3); }

        .btn-primary {
            width: 100%; height: 56px; background: linear-gradient(135deg, var(--brand-primary), #4f46e5);
            border: none; border-radius: 16px; color: white; font-weight: 700; font-size: 1rem;
            cursor: pointer; box-shadow: 0 4px 20px rgba(99, 102, 241, 0.4);
            display: flex; align-items: center; justify-content: center; gap: 8px;
        }
        .btn-primary:active { transform: scale(0.98); }

        /* Menu Inferior (Dock) */
        .nav-dock {
            position: fixed; bottom: 0; left: 0; right: 0;
            background: rgba(15, 23, 42, 0.95); backdrop-filter: blur(20px);
            border-top: var(--border);
            display: grid; grid-template-columns: repeat(5, 1fr);
            padding-bottom: max(10px, env(safe-area-inset-bottom));
            padding-top: 10px; z-index: 1000;
        }
        .nav-item {
            background: none; border: none;
            display: flex; flex-direction: column; align-items: center; gap: 4px;
            color: var(--text-secondary); cursor: pointer; padding: 4px 0;
        }
        .nav-item.active { color: var(--brand-primary); }
        .nav-icon { font-size: 1.4rem; }
        .nav-label { font-size: 0.65rem; font-weight: 600; }

        .fab {
            width: 56px; height: 56px; background: linear-gradient(135deg, #10b981, #059669);
            border-radius: 50%; border: 4px solid var(--bg-app);
            display: flex; align-items: center; justify-content: center;
            color: white; font-size: 2rem; margin-top: -30px;
            box-shadow: 0 0 20px rgba(16, 185, 129, 0.4); cursor: pointer;
        }

        /* Utilit√°rios */
        .hidden { display: none !important; }
        .fade-in { animation: fadeIn 0.3s ease-out; }
        @keyframes fadeIn { from{opacity:0;transform:translateY(10px)} to{opacity:1;transform:translateY(0)} }
    </style>
</head>
<body>

    <div class="app-shell">
        
        <header class="header">
            <div class="brand">
                <div class="brand-icon">üß†</div>
                <div class="brand-text">
                    <h1>Wesley AI</h1>
                    <span>Finance Pro v4.0</span>
                </div>
            </div>
            <button onclick="App.resetData()" style="background:none; border:none; color:var(--color-danger); font-size:1.2rem;">‚ö†Ô∏è</button>
        </header>

        <div id="view-dash" class="fade-in">
            <div class="card balance-card">
                <div class="label">Saldo Atual</div>
                <div class="amount-lg" id="dash-saldo">R$ ...</div>
                <div class="stats-grid">
                    <div class="stat-box">
                        <span class="label">Entradas</span>
                        <span class="amount-sm text-green" id="dash-inc">...</span>
                    </div>
                    <div class="stat-box">
                        <span class="label">Sa√≠das</span>
                        <span class="amount-sm text-red" id="dash-exp">...</span>
                    </div>
                </div>
            </div>

            <div class="ai-box">
                <div class="ai-icon">ü§ñ</div>
                <div class="ai-text" id="ai-insight-text">
                    <strong>Analisando seus h√°bitos...</strong>
                    <p>Processando transa√ß√µes para gerar dicas personalizadas.</p>
                </div>
            </div>

            <div class="card">
                <div class="label" style="margin-bottom: 16px;">Raio-X de Gastos</div>
                <div style="position:relative; height:200px; width:100%">
                    <canvas id="chart-main"></canvas>
                </div>
            </div>

            <div>
                <div style="display:flex; justify-content:space-between; margin-bottom:16px; align-items:center;">
                    <h3 style="font-size:1.1rem; font-weight:700;">Recentes</h3>
                    <button onclick="UI.go('list')" style="background:none; border:none; color:var(--brand-primary); font-weight:600; font-size:0.8rem;">Ver tudo</button>
                </div>
                <div id="tx-list-recent" class="tx-list"></div>
            </div>
        </div>

        <div id="view-add" class="hidden fade-in">
            <h2 style="margin-bottom:24px; text-align:center;">Nova Transa√ß√£o</h2>
            
            <div class="type-tabs">
                <div class="tab active rec" id="tab-rec" onclick="UI.setTyp('receita')">Entrada</div>
                <div class="tab" id="tab-desp" onclick="UI.setTyp('despesa')">Sa√≠da</div>
            </div>

            <form id="form-add">
                <div class="input-group">
                    <label class="label">Valor (R$)</label>
                    <input type="number" id="in-val" class="input-field" step="0.01" placeholder="0,00" required inputmode="decimal">
                </div>
                <div class="input-group">
                    <label class="label">Descri√ß√£o (IA Categoriza Autom√°tico)</label>
                    <input type="text" id="in-desc" class="input-field" placeholder="Ex: Jantar no Sushi, Uber, Oxxo..." required autocomplete="off">
                </div>
                <div class="input-group">
                    <label class="label">Data</label>
                    <input type="date" id="in-date" class="input-field" required>
                </div>
                <button type="submit" class="btn-primary">
                    <span>‚ú® Confirmar Lan√ßamento</span>
                </button>
            </form>
        </div>

        <div id="view-list" class="hidden fade-in">
            <h2 style="margin-bottom:20px;">Hist√≥rico Completo</h2>
            <div class="input-group">
                <input type="text" id="search" class="input-field" placeholder="üîç Buscar..." onkeyup="UI.renderList()">
            </div>
            <div id="tx-list-full" class="tx-list"></div>
        </div>

    </div>

    <nav class="nav-dock">
        <button class="nav-item active" onclick="UI.go('dash', this)">
            <span class="nav-icon">üìä</span><span class="nav-label">Home</span>
        </button>
        <button class="nav-item" onclick="UI.go('list', this)">
            <span class="nav-icon">üìë</span><span class="nav-label">Extrato</span>
        </button>
        <div class="fab" onclick="UI.go('add')">+</div>
        <button class="nav-item" onclick="alert('Em breve!')">
            <span class="nav-icon">üéØ</span><span class="nav-label">Metas</span>
        </button>
        <button class="nav-item" onclick="alert('Em breve!')">
            <span class="nav-icon">üìà</span><span class="nav-label">Invest</span>
        </button>
    </nav>

    <script>
        /* === 1. DADOS ORIGINAIS (BACKUP) === */
        const SEED_JSON = {"transacoes":[{"id":1,"tipo":"receita","data":"2026-01-05","valor":1488.25,"desc":"Pagamento Localiza","cat":"Sal√°rio"},{"id":2,"tipo":"despesa","data":"2026-01-15","valor":323.8,"desc":"Nubank Negocia√ß√£o","cat":"Bancos"},{"id":3,"tipo":"despesa","data":"2026-01-15","valor":35,"desc":"Vivo M√≥vel","cat":"Moradia"},{"id":4,"tipo":"despesa","data":"2026-01-15","valor":93.06,"desc":"Vivo Fixo","cat":"Moradia"},{"id":5,"tipo":"despesa","data":"2026-01-15","valor":100,"desc":"Devolu√ß√£o Irene","cat":"Outros"},{"id":6,"tipo":"despesa","data":"2026-01-15","valor":313.31,"desc":"Ita√∫ Cart√£o","cat":"Bancos"},{"id":7,"tipo":"despesa","data":"2026-01-15","valor":39.99,"desc":"Jantar","cat":"Alimenta√ß√£o"},{"id":8,"tipo":"despesa","data":"2026-01-16","valor":123.68,"desc":"Supermercado","cat":"Alimenta√ß√£o"},{"id":9,"tipo":"despesa","data":"2026-01-22","valor":41.56,"desc":"Despedida Giselle","cat":"Lazer"},{"id":10,"tipo":"despesa","data":"2026-01-19","valor":53.17,"desc":"Almo√ßo Shimatzu","cat":"Alimenta√ß√£o"},{"id":11,"tipo":"despesa","data":"2026-01-21","valor":25.4,"desc":"Almo√ßo Shimatzu","cat":"Alimenta√ß√£o"},{"id":12,"tipo":"despesa","data":"2026-01-15","valor":100,"desc":"Recarga Bilhete","cat":"Transporte"},{"id":13,"tipo":"despesa","data":"2026-01-05","valor":1111.84,"desc":"Ita√∫ Limite","cat":"Bancos"}]};

        /* === 2. C√âREBRO DE IA (HYPER-CATEGORIZATION) === */
        const Brain = {
            rules: {
                'Alimenta√ß√£o': ['mercado', 'ifood', 'rappi', 'restaurante', 'almo√ßo', 'jantar', 'caf√©', 'padaria', 'p√£o', 'leite', 'carrefour', 'extra', 'dia', 'oxxo', 'assai', 'atacad√£o', 'pizza', 'sushi', 'hamburguer', 'bk', 'mcdonalds', 'burguer', 'subway', 'sorvete', 'a√ßa√≠', 'doce', 'bolo', 'churrasco', 'espeto', 'bar', 'cerveja', 'comida', 'lanche', 'food', 'shimatzu'],
                'Transporte': ['uber', '99', 'taxi', 'pop', 'indrive', 'posto', 'gasolina', 'etanol', 'combust√≠vel', 'abastecimento', '√¥nibus', 'metro', 'trem', 'bilhete', 'recarga', 'estacionamento', 'ipva', 'ped√°gio', 'sem parar', 'oficina', 'mec√¢nico', 'pneu'],
                'Moradia': ['aluguel', 'condom√≠nio', 'luz', 'energia', 'enel', '√°gua', 'sabesp', 'internet', 'claro', 'vivo', 'tim', 'oi', 'net', 'g√°s', 'iptu', 'limpeza', 'faxina', 'casa', 'manuten√ß√£o'],
                'Sa√∫de': ['farm√°cia', 'droga', 'rem√©dio', 'm√©dico', 'consulta', 'exame', 'laborat√≥rio', 'dentista', 'psic√≥logo', 'terapia', 'academia', 'smartfit', 'bluefit', 'suplemento', 'creatina', 'whey'],
                'Lazer': ['netflix', 'spotify', 'prime', 'hbo', 'disney', 'cinema', 'ingresso', 'show', 'teatro', 'jogo', 'steam', 'playstation', 'xbox', 'clube', 'viagem', 'hotel', 'airbnb', 'passeio'],
                'Compras': ['shopee', 'amazon', 'mercado livre', 'shein', 'magalu', 'casas bahia', 'ponto frio', 'roupa', 't√™nis', 'sapato', 'eletr√¥nico', 'celular', 'acess√≥rio', 'presente', 'loja'],
                'Educa√ß√£o': ['curso', 'faculdade', 'escola', 'livro', 'material', 'papelaria', 'udemy', 'alura', 'idioma', 'ingl√™s'],
                'Bancos': ['nubank', 'ita√∫', 'bradesco', 'santander', 'inter', 'c6', 'taxa', 'tarifa', 'anuidade', 'juros', 'emprestimo', 'financiamento', 'fatura'],
                'Pets': ['pet', 'ra√ß√£o', 'banho', 'tosa', 'veterin√°rio', 'cachorro', 'gato'],
                'Sal√°rio': ['sal√°rio', 'pagamento', 'holerite', 'adiantamento', '13¬∫', 'f√©rias', 'b√¥nus', 'localiza', 'empresa', 'servi√ßo', 'freela', 'extra']
            },
            
            predict(text) {
                const t = text.toLowerCase();
                for (const [cat, keys] of Object.entries(this.rules)) {
                    if (keys.some(k => t.includes(k))) return cat;
                }
                return 'Outros';
            },

            getIcon(cat) {
                const map = {'Alimenta√ß√£o':'üçî', 'Transporte':'üöó', 'Moradia':'üè†', 'Sa√∫de':'üíä', 'Lazer':'üéâ', 'Compras':'üõçÔ∏è', 'Educa√ß√£o':'üìö', 'Bancos':'üè¶', 'Pets':'üêæ', 'Sal√°rio':'üí∞', 'Outros':'üìù'};
                return map[cat] || 'üìù';
            },

            analyze(txs) {
                const desp = txs.filter(t => t.tipo === 'despesa');
                if (desp.length === 0) return { title: "Ol√°!", msg: "Comece adicionando seus gastos." };
                
                // Top Categoria
                const cats = {};
                desp.forEach(t => cats[t.cat] = (cats[t.cat] || 0) + t.valor);
                const topCat = Object.keys(cats).sort((a,b) => cats[b] - cats[a])[0];
                const total = desp.reduce((a,b) => a + b.valor, 0);
                const pct = Math.round((cats[topCat] / total) * 100);

                return {
                    title: `Aten√ß√£o aos gastos com ${topCat}!`,
                    msg: `Voc√™ gastou <strong>${pct}%</strong> do seu or√ßamento nesta categoria. Tente economizar aqui.`
                };
            }
        };

        // --- 3. DATA MANAGER ---
        const DB = {
            key: 'wesley_v4_pro',
            data: [],
            
            init() {
                const stored = localStorage.getItem(this.key);
                if (stored) {
                    this.data = JSON.parse(stored);
                } else {
                    // Carrega dados do JSON Semente se for a primeira vez
                    this.data = SEED_JSON.transacoes;
                    this.save();
                }
            },
            
            save() {
                localStorage.setItem(this.key, JSON.stringify(this.data));
                UI.update();
            },
            
            add(tx) {
                this.data.unshift(tx);
                this.save();
            },
            
            delete(id) {
                if(confirm("Remover item?")) {
                    this.data = this.data.filter(t => t.id !== id);
                    this.save();
                }
            },

            reset() {
                if(confirm("ATEN√á√ÉO: Restaurar dados originais?")) {
                    localStorage.removeItem(this.key);
                    location.reload();
                }
            }
        };

        // --- 4. UI CONTROLLER ---
        const UI = {
            type: 'receita',
            chart: null,

            init() {
                // Setup Data
                const now = new Date();
                const offset = now.getTimezoneOffset() * 60000;
                document.getElementById('in-date').value = new Date(now - offset).toISOString().split('T')[0];
                
                // Form Listener
                document.getElementById('form-add').addEventListener('submit', e => {
                    e.preventDefault();
                    this.submit();
                });

                this.update();
            },

            update() {
                const txs = DB.data;
                
                // 1. Totais
                const inc = txs.filter(t=>t.tipo==='receita').reduce((a,b)=>a+b.valor,0);
                const exp = txs.filter(t=>t.tipo==='despesa').reduce((a,b)=>a+b.valor,0);
                
                document.getElementById('dash-saldo').textContent = this.fmt(inc - exp);
                document.getElementById('dash-inc').textContent = this.fmt(inc);
                document.getElementById('dash-exp').textContent = this.fmt(exp);

                // 2. Listas
                this.renderList('tx-list-recent', txs.slice(0, 5));
                this.renderList('tx-list-full', txs);

                // 3. IA Insight
                const insight = Brain.analyze(txs);
                document.getElementById('ai-insight-text').innerHTML = `<strong>${insight.title}</strong><p>${insight.msg}</p>`;

                // 4. Gr√°fico
                this.renderChart(txs);
            },

            renderList(id, list) {
                const el = document.getElementById(id);
                if (!el) return;
                
                // Filtro de busca se for a lista completa
                if (id === 'tx-list-full') {
                    const term = document.getElementById('search').value.toLowerCase();
                    list = list.filter(t => t.desc.toLowerCase().includes(term));
                }

                el.innerHTML = list.map(t => {
                    const icon = Brain.getIcon(t.cat);
                    const color = t.tipo === 'receita' ? 'var(--color-success)' : 'var(--color-danger)';
                    const sign = t.tipo === 'receita' ? '+' : '-';
                    const date = t.data.split('-').reverse().slice(0,2).join('/');
                    
                    return `
                    <div class="tx-item" onclick="DB.delete(${t.id})">
                        <div class="tx-left">
                            <div class="tx-icon">${icon}</div>
                            <div class="tx-info">
                                <h3>${t.desc}</h3>
                                <p>${date} ‚Ä¢ ${t.cat}</p>
                            </div>
                        </div>
                        <div class="tx-val" style="color:${color}">${sign} ${this.fmt(t.valor)}</div>
                    </div>`;
                }).join('');
            },

            renderChart(txs) {
                const ctx = document.getElementById('chart-main');
                if(!ctx) return;
                
                if(this.chart) this.chart.destroy();
                
                const cats = {};
                txs.filter(t=>t.tipo==='despesa').forEach(t => cats[t.cat] = (cats[t.cat] || 0) + t.valor);
                
                this.chart = new Chart(ctx, {
                    type: 'doughnut',
                    data: {
                        labels: Object.keys(cats),
                        datasets: [{
                            data: Object.values(cats),
                            backgroundColor: ['#6366f1', '#10b981', '#f59e0b', '#ef4444', '#0ea5e9', '#ec4899', '#8b5cf6'],
                            borderWidth: 0
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: { legend: { position: 'right', labels: { color: '#94a3b8', boxWidth: 10 } } }
                    }
                });
            },

            submit() {
                const val = parseFloat(document.getElementById('in-val').value);
                const desc = document.getElementById('in-desc').value;
                const date = document.getElementById('in-date').value;
                
                if(!val || !desc) return;

                const cat = Brain.predict(desc);
                
                DB.add({
                    id: Date.now(),
                    tipo: this.type,
                    valor: val,
                    desc: desc,
                    data: date,
                    cat: cat
                });

                alert(`‚úÖ Classificado como: ${cat}`);
                
                document.getElementById('in-val').value = '';
                document.getElementById('in-desc').value = '';
                this.go('dash');
            },

            setTyp(t) {
                this.type = t;
                const r = document.getElementById('tab-rec');
                const d = document.getElementById('tab-desp');
                
                if(t === 'receita') {
                    r.className = 'tab active rec';
                    d.className = 'tab';
                } else {
                    r.className = 'tab';
                    d.className = 'tab active desp';
                }
            },

            go(page, btn) {
                document.querySelectorAll('#view-dash, #view-add, #view-list').forEach(e => e.classList.add('hidden'));
                document.getElementById('view-'+page).classList.remove('hidden');
                
                if(btn) {
                    document.querySelectorAll('.nav-item').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                }
                
                window.scrollTo(0,0);
                if(page === 'list') this.renderList('tx-list-full', DB.data); // Force refresh list
            },

            fmt(v) { return v.toLocaleString('pt-BR', {style:'currency', currency:'BRL'}); }
        };

        const App = { reset: () => DB.reset() };

        // Start
        DB.init();
        UI.init();

    </script>
</body>
</html>